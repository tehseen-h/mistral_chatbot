<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mistral AI</title>
  <link rel="stylesheet" href="css/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="hljs-theme" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
</head>
<body>
  <!-- Animated background -->
  <div class="bg-mesh" aria-hidden="true">
    <div class="mesh-gradient mesh-1"></div>
    <div class="mesh-gradient mesh-2"></div>
    <div class="mesh-gradient mesh-3"></div>
  </div>

  <!-- ─── Sidebar ──────────────────────────────────────── -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <div class="logo-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>
        </div>
        <span>Mistral</span>
      </div>
      <button class="btn-icon glass-btn" id="newChatBtn" title="New Chat">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
      </button>
    </div>

    <!-- Sidebar Tabs: Chats / Projects -->
    <div class="sidebar-tabs">
      <button class="sidebar-tab active" data-tab="chats" id="tabChats">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        Chats
      </button>
      <button class="sidebar-tab" data-tab="projects" id="tabProjects">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2Z"/></svg>
        Projects
      </button>
    </div>

    <!-- Chats Panel -->
    <div class="sidebar-panel active" id="panelChats">
      <div class="sidebar-search">
        <svg class="search-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        <input type="text" placeholder="Search conversations…" id="searchInput" />
      </div>
      <div class="session-list" id="sessionList"></div>
    </div>

    <!-- Projects Panel -->
    <div class="sidebar-panel" id="panelProjects">
      <button class="new-project-btn" id="newProjectBtn">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        Create New Project
      </button>
      <div class="project-list" id="projectList"></div>
    </div>

    <div class="sidebar-footer">
      <button class="btn-icon glass-btn" id="themeToggle" title="Toggle theme">
        <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
        <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
      </button>
      <span class="footer-label">Powered by Mistral AI</span>
    </div>
  </aside>

  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- ─── Main Chat Area ───────────────────────────────── -->
  <main class="chat-main">
    <header class="chat-header">
      <button class="btn-icon glass-btn mobile-menu" id="menuBtn" title="Menu">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
      </button>
      <div class="header-center">
        <div class="model-badge">
          <div class="model-dot"></div>
          <span>Mistral Large</span>
        </div>
        <h1 class="chat-title" id="chatTitle">New Chat</h1>
        <!-- Project badge shown when inside a project -->
        <div class="project-badge hidden" id="projectBadge">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2Z"/></svg>
          <span id="projectBadgeName"></span>
        </div>
      </div>
      <button class="btn-icon glass-btn" id="deleteChatBtn" title="Delete chat">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>
      </button>
    </header>

    <!-- Messages -->
    <div class="chat-messages" id="chatMessages">
      <div class="welcome" id="welcomeScreen">
        <div class="welcome-glow"></div>
        <div class="welcome-icon">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>
        </div>
        <h2>Hello, how can I help?</h2>
        <p>I'm Mistral, a powerful AI assistant. Ask me anything — from coding to creative writing.</p>
        <div class="suggestions">
          <button class="suggestion" onclick="useSuggestion(this)" data-text="Explain quantum computing in simple terms anyone can understand">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><path d="M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z"/><path d="M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z"/></svg>
            <div><strong>Explain quantum computing</strong><span>in simple terms anyone can understand</span></div>
          </button>
          <button class="suggestion" onclick="useSuggestion(this)" data-text="Write a Python function to sort a list efficiently">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 16 4-4-4-4"/><path d="m6 8-4 4 4 4"/><path d="m14.5 4-5 16"/></svg>
            <div><strong>Write a Python function</strong><span>to sort a list efficiently</span></div>
          </button>
          <button class="suggestion" onclick="useSuggestion(this)" data-text="What are the best practices for REST API design?">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="8" x="2" y="2" rx="2"/><rect width="20" height="8" x="2" y="14" rx="2"/><line x1="6" x2="6.01" y1="6" y2="6"/><line x1="6" x2="6.01" y1="18" y2="18"/></svg>
            <div><strong>REST API best practices</strong><span>design patterns and conventions</span></div>
          </button>
          <button class="suggestion" onclick="useSuggestion(this)" data-text="Help me debug a JavaScript async issue with promises">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m8 2 1.88 1.88"/><path d="M14.12 3.88 16 2"/><path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"/><path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"/><path d="M12 20v-9"/><path d="M6.53 9C4.6 8.8 3 7.1 3 5"/><path d="M6 13H2"/><path d="M3 21c0-2.1 1.7-3.9 3.8-4"/><path d="M20.97 5c0 2.1-1.6 3.8-3.5 4"/><path d="M22 13h-4"/><path d="M17.2 17c2.1.1 3.8 1.9 3.8 4"/></svg>
            <div><strong>Debug JavaScript async</strong><span>help me fix promise and await issues</span></div>
          </button>
        </div>
      </div>
    </div>

    <!-- Input -->
    <div class="chat-input-wrapper">
      <div class="file-preview-bar hidden" id="filePreviewBar"></div>
      <form class="chat-input-form" id="chatForm">
        <div class="input-container">
          <input type="file" id="fileInput" class="hidden" multiple
            accept=".txt,.py,.js,.ts,.jsx,.tsx,.html,.css,.json,.xml,.yaml,.yml,.md,.csv,.log,.sh,.sql,.java,.c,.cpp,.h,.cs,.go,.rs,.php,.rb,.swift,.kt,.scala,.toml,.vue,.svelte,.dart,.lua,.png,.jpg,.jpeg,.gif,.webp,.bmp,.pdf" />
          <button type="button" class="attach-btn" id="attachBtn" title="Attach file (max 100 MB)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/></svg>
          </button>
          <textarea id="messageInput" placeholder="Ask me anything…" rows="1" autofocus></textarea>
          <button type="submit" class="send-btn" id="sendBtn" disabled title="Send message">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m5 12 7-7 7 7"/><path d="M12 19V5"/></svg>
          </button>
        </div>
        <div class="input-bottom-row">
          <!-- Thinking toggle -->
          <div class="thinking-toggle" id="thinkingToggle" title="Toggle thinking mode">
            <button type="button" class="think-option active" data-mode="quick">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
              Quick
            </button>
            <button type="button" class="think-option" data-mode="thinking">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a8 8 0 0 0-8 8c0 3.4 2.1 6.3 5 7.4V20a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2.6c2.9-1.1 5-4 5-7.4a8 8 0 0 0-8-8z"/><path d="M9 22h6"/></svg>
              Think
            </button>
          </div>
          <p class="input-hint"><kbd>Enter</kbd> to send · <kbd>Shift+Enter</kbd> for new line</p>
        </div>
      </form>
    </div>
  </main>

  <!-- ─── Project Modal ────────────────────────────────── -->
  <div class="modal-overlay hidden" id="projectModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="modalTitle">Create Project</h3>
        <button class="btn-icon" id="modalClose" title="Close">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <label class="modal-label" for="projectNameInput">Project Name</label>
        <input type="text" id="projectNameInput" class="modal-input" placeholder="e.g. Python Tutor, Code Review Bot…" maxlength="120" />

        <label class="modal-label" for="projectInstructionsInput">
          Custom Instructions
          <span class="label-hint">These instructions will be applied to every chat in this project</span>
        </label>
        <textarea id="projectInstructionsInput" class="modal-textarea" placeholder="e.g. You are an expert Python tutor. Always explain concepts step by step, use beginner-friendly language, and provide runnable code examples.&#10;&#10;Focus on best practices and clean code." maxlength="5000" rows="6"></textarea>
        <div class="char-count"><span id="charCount">0</span> / 5000</div>
      </div>
      <div class="modal-footer">
        <button class="modal-btn secondary" id="modalCancel">Cancel</button>
        <button class="modal-btn primary" id="modalSave">Create Project</button>
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>
